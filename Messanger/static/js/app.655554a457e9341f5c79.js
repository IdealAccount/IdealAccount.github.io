webpackJsonp([1],{"6tOb":function(t,e){},"7Og7":function(t,e){},DXbH:function(t,e){},K8D4:function(t,e){},NHnr:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=i("7+uW"),s=i("Dd8w"),r=i.n(s),o=i("NYxO"),n={computed:r()({},Object(o.c)(["DIALOGS_REVERSE"])),methods:{goTo:function(t){var e=t.target;if(!e.classList.contains("active")){var i=document.querySelector(".viewport-loader"),a=document.createElement("div");e.classList.add("active"),a.classList.add("loader-bg"),document.querySelector(".chat-body").append(a),i.classList.add("active"),setTimeout(function(){a.remove(),i.classList.remove("active")},800)}}}},c={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"dialogs-wrapper"},[i("ul",{staticClass:"dialogs",on:{click:t.goTo}},t._l(t.DIALOGS_REVERSE,function(e){return i("router-link",{key:e.id,staticClass:"dialog-frame",attrs:{tag:"li",to:{name:"dialog",params:{id:e.id}}}},[i("div",{staticClass:"dialog-frame__subj"},[i("strong",[t._v(t._s(e.subject))])]),t._v(" "),i("p",{staticClass:"dialog-frame__text"},[t._v(t._s(e.messages[e.messages.length-1].text))]),t._v(" "),i("span",{staticClass:"dialog-frame__date"},[t._v(t._s(e.created))])])}),1)])},staticRenderFns:[]};var u={components:{DialogsList:i("VU/8")(n,c,!1,function(t){i("s25I")},null,null).exports},computed:r()({},Object(o.c)(["DIALOGS_LENGTH"]))},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sidebar-dialogs sidebar"},[e("div",{staticClass:"sidebar-title"},[this._v("Сообщения "),e("span",[this._v(this._s(this.DIALOGS_LENGTH))])]),this._v(" "),e("dialogs-list"),this._v(" "),e("div",{staticClass:"sidebar-footer"})],1)},staticRenderFns:[]};var d=i("VU/8")(u,l,!1,function(t){i("aFrk")},null,null).exports,m=i("BO1k"),h=i.n(m),v={data:function(){return{message:"",active:!1}},computed:r()({},Object(o.d)(["DIALOGS"]),{thatDialog:function(){var t=!0,e=!1,i=void 0;try{for(var a,s=h()(this.DIALOGS);!(t=(a=s.next()).done);t=!0){var r=a.value;if(r.id===parseInt(this.$route.params.id))return r}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}},getDate:function(){return this.getFullDate()}}),methods:r()({},Object(o.b)(["SEND_MESSAGE"]),{sendMessage:function(t){var e=this;if(""!==this.message){var i=this.getSender(t);this.inSending();var a={id:this.$route.params.id,created:this.getDate.date,message:{id:this.thatDialog.messages.length+1,author:i.author,out:i.out,text:this.message,created:this.getDate.fullDate}};this.SEND_MESSAGE(a),this.message="",setTimeout(function(){return e.autoScroll()},1e3)}},inSending:function(){var t=this.$refs.loader;t.classList.add("active");var e=this.$refs.input;e.disabled=!0;var i=this.$refs.submit;i.disabled=!0,i.style.backgroundColor="#828282",setTimeout(function(){e.disabled=!1,i.disabled=!1,i.style.background="",t.classList.remove("active")},1e3)},getSender:function(t){var e=this,i=void 0;return this.thatDialog.messages.forEach(function(a){if(t.ctrlKey){if(!a.out)return e.author=a.author,i={author:a.author,out:a.out}}else if(a.out)return i={author:a.author,out:a.out}}),i},getFullDate:function(){var t=new Date,e=t.getDate();e<10&&(e="0"+e);var i=t.getMonth()+1;i<10&&(i="0"+i);var a=t.getFullYear(),s=t.getHours();s<10&&(s="0"+s);var r=t.getMinutes();return r<10&&(r="0"+r),{fullDate:e+"-"+i+"-"+a+" "+s+":"+r,date:e+" "+["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"][i-1]+" "+a}},autoScroll:function(){var t=document.querySelector(".msg-list");document.querySelector(".chat-wrapper").scrollTop=t.scrollHeight}})},f={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"chat-input"},[i("form",{staticClass:"chat-input__group"},[i("div",{staticClass:"chat-input__edit"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"input",attrs:{placeholder:"Введите текст..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),i("button",{ref:"submit",staticClass:"chat-input__submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.sendMessage(e)},mouseenter:function(e){t.active=!0},mouseleave:function(e){t.active=!1}}},[i("span",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],ref:"title",staticClass:"submit-title"},[t._v("\n        Чтобы получить входящее сообщение\n        зажмите CTRL\n      ")])])]),t._v(" "),i("div",{ref:"loader",staticClass:"loader-container"},[i("div",{staticClass:"bubbles"},t._l(4,function(t){return i("div",{staticClass:"bubble"},[i("div",{staticClass:"circle"})])}),0)])])},staticRenderFns:[]};var p=i("VU/8")(v,f,!1,function(t){i("kipl")},null,null).exports,g={data:function(){return{}},computed:r()({},Object(o.d)(["DIALOGS"]),{chatMessages:function(){var t=!0,e=!1,i=void 0;try{for(var a,s=h()(this.DIALOGS);!(t=(a=s.next()).done);t=!0){var r=a.value;if(r.id===parseInt(this.$route.params.id))return r.messages}}catch(t){e=!0,i=t}finally{try{!t&&s.return&&s.return()}finally{if(e)throw i}}}})},_={render:function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"msg-list"},t._l(t.chatMessages,function(e){return i("li",{key:e.id,class:["msg-list__item",e.out?"msg-list__item--out":"msg-list__item--in"]},[i("span",{staticClass:"msg",domProps:{innerHTML:t._s(e.text)}}),t._v(" "),i("div",{staticClass:"msg-info"},[i("span",{staticClass:"msg-info__author"},[i("strong",[t._v(t._s(e.author))])]),t._v(" "),i("span",{staticClass:"msg-info__date"},[t._v(t._s(e.created))])])])}),0)},staticRenderFns:[]};var b=i("VU/8")(g,_,!1,function(t){i("K8D4")},null,null).exports,x={components:{ChatMessages:b},data:function(){return{isShow:!1,scrollBlock:{}}},mounted:function(){this.scrollBlock=this.$refs.track,this.scrollBlock.addEventListener("scroll",this.showArrow),this.scrollToBottom()},updated:function(){this.scrollToBottom(),this.showArrow()},methods:{scrollToBottom:function(){this.scrollBlock.scrollTop=this.scrollBlock.children[0].scrollHeight},showArrow:function(){console.log("!")}},beforeDestroy:function(){this.scrollBlock.removeEventListener("scroll",this.showArrow)}},E={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-body"},[e("div",{directives:[{name:"show",rawName:"v-show",value:this.isShow,expression:"isShow"}],staticClass:"to-bottom",on:{click:this.scrollToBottom}}),this._v(" "),this._m(0),this._v(" "),e("div",{ref:"track",staticClass:"chat-wrapper"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"viewport-loader"},[e("div",{staticClass:"viewport-inner viewport-one"}),this._v(" "),e("div",{staticClass:"viewport-inner viewport-two"}),this._v(" "),e("div",{staticClass:"viewport-inner viewport-two"})])}]};var S={components:{ChatInput:p,ChatBody:i("VU/8")(x,E,!1,function(t){i("DXbH")},null,null).exports}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-viewport"},[e("chat-body"),this._v(" "),e("chat-input")],1)},staticRenderFns:[]};var w={components:{DialogsSidebar:d,ChatViewport:i("VU/8")(S,D,!1,function(t){i("6tOb")},null,null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"msg-viewer"},[e("dialogs-sidebar"),this._v(" "),e("chat-viewport")],1)},staticRenderFns:[]};var L={components:{MessagePage:i("VU/8")(w,C,!1,function(t){i("Z69O")},null,null).exports}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("message-page")],1)},staticRenderFns:[]};var O=i("VU/8")(L,A,!1,function(t){i("oRRu")},null,null).exports,q=i("/ocq"),G={computed:r()({},Object(o.c)(["DIALOGS_LENGTH","LAST_DIALOG"]))},y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default-container"},[e("h3",{staticClass:"default-title"},[this._v("Выберите диалог из списка.")])])}]};var I=[{path:"*",component:i("VU/8")(G,y,!1,function(t){i("7Og7")},null,null).exports},{path:"/dialog/:id",name:"dialog",component:b}];a.a.use(q.a);var k=new q.a({mode:"history",routes:I}),M=i("Xxa5"),T=i.n(M),R=i("exGp"),j=i.n(R),$=this;a.a.use(o.a);var F,N=new o.a.Store({state:{DIALOGS:[{id:1,subject:"Привет",created:"12 мая 2023",messages:[{id:1,author:"Василий",created:"2019-08-01 23:59",text:"Привет, как дела?",out:!0},{id:2,author:"Петр",created:"2019-08-01 23:59",text:"Привет, все хорошо, спасибо",out:!1}]},{id:2,subject:"Привет",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Вопрос по домену",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"А что с ним не так?",out:!0}]},{id:3,subject:"Тестовое задание",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Выслал вам тестовое задание, пришлите результат на почту. Срок выполнения 3 дня, срок проверки 3 дня",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Получил, спасибо",out:!0},{id:3,author:"Василий",created:"2019-08-01 23:59",text:"Отправил вам результаты. Есть некоторые вопросы, когда будет время, давайте обсудим",out:!0}]},{id:4,subject:"Вопрос по домену",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Вопрос по домену, с ним что то не так",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"А что с ним не так?",out:!0}]},{id:5,subject:"Вылет в командировку",created:"12 мая 2023",messages:[{id:1,author:"Василий",created:"2019-08-01 23:59",text:"Во сколько летим",out:!0},{id:2,author:"Петр",created:"2019-08-01 23:59",text:"Купил билеты на 14:20",out:!1}]},{id:6,subject:"Добавить на сайт контент",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Здравствуйте, есть новости, нужно добавить на первую страницу",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Доброй ночи, я уже занимаюсь этим",out:!0}]},{id:7,subject:"Удалить иконки",created:"12 мая 2023",messages:[{id:1,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0}]},{id:8,subject:"Привет",created:"12 мая 2023",messages:[{id:1,author:"Лена",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!0},{id:3,author:"Лена",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!1},{id:4,author:"Василий",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!0},{id:5,author:"Лена",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!1},{id:6,author:"Василий",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!0},{id:7,author:"Лена",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!1},{id:8,author:"Василий",created:"2019-08-01 23:59",text:"Morbi hac eligendi totam? Elementum mi facilis aliquet id turpis ultrices mollitia porttitor praesentium animi ullamco eleifend scelerisque, sapien quam explicabo conubia egestas vehicula!",out:!0}]},{id:9,subject:"Картины",created:"12 мая 2023",messages:[{id:1,author:"Катя",created:"2019-08-01 23:59",text:'<img src="http://n1s2.hsmedia.ru/b5/12/2c/b5122c700e41ce7dd189c5a025b9f622/440x326_21_5d8da09ebf2f551fe3d9bfc9d843ffca@690x460_0xc0a8392b_12648031561493219818.jpeg">',out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Шедевр!",out:!0}]}]},getters:{DIALOGS_LENGTH:function(t){return t.DIALOGS.length},DIALOGS_REVERSE:function(t){return t.DIALOGS.reverse()},LAST_DIALOG:function(t){return t.DIALOGS.reverse()[t.DIALOGS.length-1]}},mutations:{ADD_MESSAGE:function(t,e){t.DIALOGS.forEach(function(t){t.id===parseInt(e.id)&&(t.created=e.created,t.messages.push(e.message))})}},actions:{SEND_MESSAGE:(F=j()(T.a.mark(function t(e,i){return T.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,setTimeout(function(){e.commit("ADD_MESSAGE",i)},1e3);case 2:case"end":return t.stop()}},t,$)})),function(t,e){return F.apply(this,arguments)})}});a.a.config.productionTip=!1,new a.a({el:"#app",router:k,store:N,components:{App:O},template:"<App/>"})},Z69O:function(t,e){},aFrk:function(t,e){},kipl:function(t,e){},oRRu:function(t,e){},s25I:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.655554a457e9341f5c79.js.map