webpackJsonp([1],{"6tOb":function(t,e){},"7Og7":function(t,e){},NHnr:function(t,e,s){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=s("7+uW"),r=s("Dd8w"),i=s.n(r),o=s("NYxO"),n={computed:i()({},Object(o.c)(["DIALOGS_REVERSE"])),methods:{goTo:function(t){var e=t.target;if(!e.classList.contains("active")){var s=document.querySelector(".viewport-loader"),a=document.createElement("div");e.classList.add("active"),a.classList.add("loader-bg"),document.querySelector(".chat-body").append(a),s.classList.add("active"),setTimeout(function(){a.remove(),s.classList.remove("active")},800)}}}},c={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"dialogs-wrapper"},[s("ul",{staticClass:"dialogs",on:{click:t.goTo}},t._l(t.DIALOGS_REVERSE,function(e){return s("router-link",{key:e.id,staticClass:"dialog-frame",attrs:{tag:"li",to:{name:"dialog",params:{id:e.id}}}},[s("div",{staticClass:"dialog-frame__subj"},[s("strong",[t._v(t._s(e.subject))])]),t._v(" "),s("p",{staticClass:"dialog-frame__text"},[t._v(t._s(e.messages[e.messages.length-1].text))]),t._v(" "),s("span",{staticClass:"dialog-frame__date"},[t._v(t._s(e.created))])])}),1)])},staticRenderFns:[]};var u={components:{DialogsList:s("VU/8")(n,c,!1,function(t){s("s25I")},null,null).exports},computed:i()({},Object(o.c)(["DIALOGS_LENGTH"]))},l={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"sidebar-dialogs sidebar"},[e("div",{staticClass:"sidebar-title"},[this._v("Сообщения "),e("span",[this._v(this._s(this.DIALOGS_LENGTH))])]),this._v(" "),e("dialogs-list"),this._v(" "),e("div",{staticClass:"sidebar-footer"})],1)},staticRenderFns:[]};var d=s("VU/8")(u,l,!1,function(t){s("aFrk")},null,null).exports,h=s("BO1k"),v=s.n(h),f={data:function(){return{message:"",active:!1}},computed:i()({},Object(o.d)(["DIALOGS"]),{thatDialog:function(){var t=!0,e=!1,s=void 0;try{for(var a,r=v()(this.DIALOGS);!(t=(a=r.next()).done);t=!0){var i=a.value;if(i.id===parseInt(this.$route.params.id))return i}}catch(t){e=!0,s=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw s}}},getDate:function(){return this.getFullDate()}}),methods:i()({},Object(o.b)(["SEND_MESSAGE"]),{sendMessage:function(t){var e=this;if(""!==this.message){var s=this.getSender(t);this.inSending();var a={id:this.$route.params.id,created:this.getDate.date,message:{id:this.thatDialog.messages.length+1,author:s.author,out:s.out,text:this.message,created:this.getDate.fullDate}};this.SEND_MESSAGE(a),this.message="",setTimeout(function(){return e.autoScroll()},1e3)}},inSending:function(){var t=this.$refs.loader;t.classList.add("active");var e=this.$refs.input;e.disabled=!0;var s=this.$refs.submit;s.disabled=!0,s.style.backgroundColor="#828282",setTimeout(function(){e.disabled=!1,s.disabled=!1,s.style.background="",t.classList.remove("active")},1e3)},getSender:function(t){var e=this,s=void 0;return this.thatDialog.messages.forEach(function(a){if(t.ctrlKey){if(!a.out)return e.author=a.author,s={author:a.author,out:a.out}}else if(a.out)return s={author:a.author,out:a.out}}),s},getFullDate:function(){var t=new Date,e=t.getDate();e<10&&(e="0"+e);var s=t.getMonth()+1;s<10&&(s="0"+s);var a=t.getFullYear(),r=t.getHours();r<10&&(r="0"+r);var i=t.getMinutes();return i<10&&(i="0"+i),{fullDate:e+"-"+s+"-"+a+" "+r+":"+i,date:e+" "+["янв","фев","мар","апр","мая","июн","июл","авг","сен","окт","ноя","дек"][s-1]+" "+a}},autoScroll:function(){var t=document.querySelector(".msg-list");document.querySelector(".chat-wrapper").scrollTop=t.scrollHeight}})},m={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"chat-input"},[s("form",{staticClass:"chat-input__group"},[s("div",{staticClass:"chat-input__edit"},[s("textarea",{directives:[{name:"model",rawName:"v-model",value:t.message,expression:"message"}],ref:"input",attrs:{placeholder:"Введите текст..."},domProps:{value:t.message},on:{input:function(e){e.target.composing||(t.message=e.target.value)}}})]),t._v(" "),s("button",{ref:"submit",staticClass:"chat-input__submit",attrs:{type:"submit"},on:{click:function(e){return e.preventDefault(),t.sendMessage(e)},mouseenter:function(e){t.active=!0},mouseleave:function(e){t.active=!1}}},[s("span",{directives:[{name:"show",rawName:"v-show",value:t.active,expression:"active"}],ref:"title",staticClass:"submit-title"},[t._v("\n        Чтобы получить входящее сообщение\n        зажмите CTRL\n      ")])])]),t._v(" "),s("div",{ref:"loader",staticClass:"loader-container"},[s("div",{staticClass:"bubbles"},t._l(4,function(t){return s("div",{staticClass:"bubble"},[s("div",{staticClass:"circle"})])}),0)])])},staticRenderFns:[]};var p=s("VU/8")(f,m,!1,function(t){s("kipl")},null,null).exports,g={data:function(){return{}},computed:i()({},Object(o.d)(["DIALOGS"]),{chatMessages:function(){var t=!0,e=!1,s=void 0;try{for(var a,r=v()(this.DIALOGS);!(t=(a=r.next()).done);t=!0){var i=a.value;if(i.id===parseInt(this.$route.params.id))return i.messages}}catch(t){e=!0,s=t}finally{try{!t&&r.return&&r.return()}finally{if(e)throw s}}}})},_={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("ul",{staticClass:"msg-list"},t._l(t.chatMessages,function(e){return s("li",{key:e.id,class:["msg-list__item",e.out?"msg-list__item--out":"msg-list__item--in"]},[s("span",{staticClass:"msg"},[t._v(t._s(e.text))]),t._v(" "),s("div",{staticClass:"msg-info"},[s("span",{staticClass:"msg-info__author"},[s("strong",[t._v(t._s(e.author))])]),t._v(" "),s("span",{staticClass:"msg-info__date"},[t._v(t._s(e.created))])])])}),0)},staticRenderFns:[]};var b=s("VU/8")(g,_,!1,function(t){s("wirw")},null,null).exports,x={components:{ChatMessages:b},data:function(){return{scrollBlock:{}}},mounted:function(){this.scrollBlock=this.$refs.track,this.scrollBlock.addEventListener("scroll",this.showArrow),this.scrollToBottom()},updated:function(){this.scrollToBottom(),this.showArrow()},methods:{scrollToBottom:function(){this.scrollBlock.scrollTop=this.scrollBlock.children[0].scrollHeight},showArrow:function(){var t=this.$refs.arrow,e=this.scrollBlock.children[0].scrollHeight,s=this.scrollBlock.scrollTop,a=e-this.scrollBlock.clientHeight;e>1200&&s<a?t.classList.add("show"):t.classList.remove("show")}},beforeDestroy:function(){this.scrollBlock.removeEventListener("scroll",this.showArrow)}},w={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-body"},[e("div",{ref:"arrow",staticClass:"to-bottom",on:{click:this.scrollToBottom}}),this._v(" "),this._m(0),this._v(" "),e("div",{ref:"track",staticClass:"chat-wrapper"},[e("transition",{attrs:{name:"fade",mode:"out-in"}},[e("router-view")],1)],1)])},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"viewport-loader"},[e("div",{staticClass:"viewport-inner viewport-one"}),this._v(" "),e("div",{staticClass:"viewport-inner viewport-two"}),this._v(" "),e("div",{staticClass:"viewport-inner viewport-two"})])}]};var S={components:{ChatInput:p,ChatBody:s("VU/8")(x,w,!1,function(t){s("Nm/v")},null,null).exports}},D={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"chat-viewport"},[e("chat-body"),this._v(" "),e("chat-input")],1)},staticRenderFns:[]};var E={components:{DialogsSidebar:d,ChatViewport:s("VU/8")(S,D,!1,function(t){s("6tOb")},null,null).exports}},C={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"msg-viewer"},[e("dialogs-sidebar"),this._v(" "),e("chat-viewport")],1)},staticRenderFns:[]};var L={components:{MessagePage:s("VU/8")(E,C,!1,function(t){s("Z69O")},null,null).exports}},A={render:function(){var t=this.$createElement,e=this._self._c||t;return e("div",{attrs:{id:"app"}},[e("message-page")],1)},staticRenderFns:[]};var O=s("VU/8")(L,A,!1,function(t){s("oRRu")},null,null).exports,G=s("/ocq"),k={computed:i()({},Object(o.c)(["DIALOGS_LENGTH","LAST_DIALOG"]))},y={render:function(){this.$createElement;this._self._c;return this._m(0)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"default-container"},[e("h3",{staticClass:"default-title"},[this._v("Выберите диалог из списка.")])])}]};var I=[{path:"*",component:s("VU/8")(k,y,!1,function(t){s("7Og7")},null,null).exports},{path:"/dialog/:id",name:"dialog",component:b}];a.a.use(G.a);var T=new G.a({mode:"history",routes:I}),R=s("Xxa5"),$=s.n(R),j=s("exGp"),B=s.n(j),F=this;a.a.use(o.a);var M,N=new o.a.Store({state:{DIALOGS:[{id:1,subject:"Привет",created:"12 мая 2023",messages:[{id:1,author:"Василий",created:"2019-08-01 23:59",text:"Привет, как дела?",out:!0},{id:2,author:"Петр",created:"2019-08-01 23:59",text:"Привет, все хорошо, спасибо",out:!1}]},{id:2,subject:"Привет",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Вопрос по домену",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"А что с ним не так?",out:!0}]},{id:3,subject:"Тестовое задание",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Выслал вам тестовое задание, пришлите результат на почту. Срок выполнения 3 дня, срок проверки 3 дня",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Получил, спасибо",out:!0},{id:3,author:"Василий",created:"2019-08-01 23:59",text:"Отправил вам результаты. Есть некоторые вопросы, когда будет время, давайте обсудим",out:!0}]},{id:4,subject:"Вопрос по домену",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Вопрос по домену, с ним что то не так",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"А что с ним не так?",out:!0}]},{id:5,subject:"Вылет в командировку",created:"12 мая 2023",messages:[{id:1,author:"Василий",created:"2019-08-01 23:59",text:"Во сколько летим",out:!0},{id:2,author:"Петр",created:"2019-08-01 23:59",text:"Купил билеты на 14:20",out:!1}]},{id:6,subject:"Добавить на сайт контент",created:"12 мая 2023",messages:[{id:1,author:"Петя",created:"2019-08-01 23:59",text:"Здравствуйте, есть новости, нужно добавить на первую страницу",out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Доброй ночи, я уже занимаюсь этим",out:!0}]},{id:7,subject:"Удалить иконки",created:"12 мая 2023",messages:[{id:1,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0}]},{id:8,subject:"Удалить иконки",created:"12 мая 2023",messages:[{id:1,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0}]},{id:9,subject:"Удалить иконки",created:"12 мая 2023",messages:[{id:1,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:2,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0},{id:3,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:4,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0},{id:5,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:6,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0},{id:7,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:8,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0},{id:9,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:10,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0},{id:11,author:"Лена",created:"2019-08-01 23:59",text:'Мне нужно удалить все иконки с рабочего стола,а у меня пропала "мышка", ты ж программист, приди разберись.',out:!1},{id:12,author:"Василий",created:"2019-08-01 23:59",text:"Мышку поймал Том, всех благ вам",out:!0}]}]},getters:{DIALOGS_LENGTH:function(t){return t.DIALOGS.length},DIALOGS_REVERSE:function(t){return t.DIALOGS.reverse()},LAST_DIALOG:function(t){return t.DIALOGS.reverse()[t.DIALOGS.length-1]}},mutations:{ADD_MESSAGE:function(t,e){t.DIALOGS.forEach(function(t){t.id===parseInt(e.id)&&(t.created=e.created,t.messages.push(e.message))})}},actions:{SEND_MESSAGE:(M=B()($.a.mark(function t(e,s){return $.a.wrap(function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,setTimeout(function(){e.commit("ADD_MESSAGE",s)},1e3);case 2:case"end":return t.stop()}},t,F)})),function(t,e){return M.apply(this,arguments)})}});a.a.config.productionTip=!1,new a.a({el:"#app",router:T,store:N,components:{App:O},template:"<App/>"})},"Nm/v":function(t,e){},Z69O:function(t,e){},aFrk:function(t,e){},kipl:function(t,e){},oRRu:function(t,e){},s25I:function(t,e){},wirw:function(t,e){}},["NHnr"]);
//# sourceMappingURL=app.fda6ce7919f61df1e617.js.map